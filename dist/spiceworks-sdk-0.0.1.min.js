!function(a){var b,c;!function(){var a={},d={};b=function(b,c,d){a[b]={deps:c,callback:d}},c=function(b){function e(a){if("."!==a.charAt(0))return a;for(var c=a.split("/"),d=b.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d[b])return d[b];if(d[b]={},!a[b])throw new Error("Could not find module "+b);for(var f,g=a[b],h=g.deps,i=g.callback,j=[],k=0,l=h.length;l>k;k++)j.push("exports"===h[k]?f={}:c(e(h[k])));var m=i.apply(this,j);return d[b]=f||m},c.entries=a}(),b("conductor",["oasis","conductor/version","conductor/card_reference","conductor/card_dependencies","oasis/shims","oasis/util","conductor/capabilities","conductor/multiplex_service","conductor/adapters","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){this.options=a||{},this.oasis=new m,this.data={},this.cards={},this._capabilities=new u,k._dependencies=new p}function l(a){return a+""}var m=a["default"],n=b["default"],o=c["default"],p=d["default"],q=e.o_create,r=e.a_forEach,s=e.a_indexOf,t=f.delegate,u=g["default"],v=h["default"],w=i["default"];k.Version=n,k.Oasis=m,k._dependencies=new p,k.require=function(a){k._dependencies.requireJavaScript(a)},k.requireCSS=function(a){k._dependencies.requireCSS(a)},k.MultiplexService=v,k.adapters=w;{var x=k.Oasis.RSVP;x.Promise}k.prototype={configure:function(a,b){if("eventCallback"!==a&&"allowSameOrigin"!==a)throw new Error("Unexpected Configuration `"+a+"` = `"+b+"`");this.oasis.configure(a,b)},loadData:function(a,b,c){b=l(b),this.data[a]=this.data[a]||{},this.data[a][b]=c;var d=this.cards[a]&&this.cards[a][b];d&&r.call(d,function(a){a.updateData("*",c)})},updateData:function(a,b,c){var d=a.url,e=a.id;this.data[d][e][b]=c;var f=this.cards[d][e].slice(),g=s.call(f,a);f.splice(g,1),r.call(f,function(a){a.updateData(b,c)})},load:function(a,b,c){b=l(b);var d,e=this.data[a],f=e&&e[b],g=c||{},h=g.capabilities||[],i=this.defaultCapabilities().slice(),j=q(this.defaultServices()),k=g.adapter;if(i.push.apply(i,h),this.options.testing&&i.unshift("assertion"),g.services)for(d in g.services)j[d]=g.services[d];var m=this.oasis.createSandbox({url:a,capabilities:i,services:j,adapter:k});m.data=f,m.activateDefered=x.defer(),m.activatePromise=m.activateDefered.promise;var n=new o(m);this.cards[a]=this.cards[a]||{};var p=this.cards[a][b]=this.cards[a][b]||[];return p.push(n),n.url=a,n.id=b,m.conductor=this,m.card=n,this.oasis.consumers.nestedWiretapping&&n.wiretap(function(c,d){this.oasis.consumers.nestedWiretapping.send(d.type,{data:d.data,service:c+"",direction:d.direction,url:a,id:b})}),n},unload:function(a){var b=this.cards[a.url][a.id],c=s.call(b,a);a.sandbox.conductor=null,a.sandbox.terminate(),delete b[c],b.splice(c,1)},defaultCapabilities:t("_capabilities","defaultCapabilities"),defaultServices:t("_capabilities","defaultServices"),addDefaultCapability:t("_capabilities","addDefaultCapability"),removeDefaultCapability:t("_capabilities","removeDefaultCapability")},j["default"]=k}),b("conductor/adapters",["oasis","conductor/inline_adapter","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"],f={iframe:d.adapters.iframe,inline:e};c["default"]=f}),b("conductor/assertion_consumer",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Consumer.extend({initialize:function(){var a=this;window.ok=window.ok||function(b,c){a.send("ok",{bool:b,message:c})},window.equal=window.equal||function(b,c,d){a.send("equal",{expected:b,actual:c,message:d})},window.start=window.start||function(){a.send("start")}},events:{instruct:function(a){this.card.instruct(a)}}});b["default"]=d}),b("conductor/assertion_service",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Service.extend({initialize:function(a){this.sandbox.assertionPort=a},events:{ok:function(a){ok(a.bool,a.message)},equal:function(a){equal(a.expected,a.actual,a.message)},start:function(){start()}}});b["default"]=d}),b("conductor/capabilities",["oasis","conductor/services","conductor/lang","oasis/shims","exports"],function(a,b,c,d,e){"use strict";function f(){this.capabilities=["xhr","metadata","render","data","lifecycle","height","nestedWiretapping"],this.services=i(h)}var g=a["default"],h=b.services,i=c.copy,j=d.a_indexOf;f.prototype={defaultCapabilities:function(){return this.capabilities},defaultServices:function(){return this.services},addDefaultCapability:function(a,b){b||(b=g.Service),this.capabilities.push(a),this.services[a]=b},removeDefaultCapability:function(a){var b=j.call(this.capabilities,a);return-1!==b?this.capabilities.splice(b,1):void 0}},e["default"]=f}),b("conductor/card",["conductor","oasis","conductor/assertion_consumer","conductor/xhr_consumer","conductor/render_consumer","conductor/metadata_consumer","conductor/data_consumer","conductor/lifecycle_consumer","conductor/height_consumer","conductor/nested_wiretapping_consumer","conductor/multiplex_service","oasis/shims"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function n(){var a=document.createElement("a");a.href="!";var b=a.href.slice(0,-1);return b}function o(a,b){var c,d=b||self.oasis;for(c in a)this[c]=a[c];this.consumers=C(d.consumers),this.options=a=a||{},this.deferred={data:this.defer(),xhr:this.defer()},a.events=a.events||{},a.requests=a.requests||{},this.activateWhen(this.deferred.data.promise,[this.deferred.xhr.promise]);var e={consumers:m({assertion:r,xhr:s,render:t,metadata:u,data:v,lifecycle:w,height:x,nestedWiretapping:y},a.consumers)};for(c in e.consumers)e.consumers[c]=e.consumers[c].extend({card:this});d.connect(e)}var p=a["default"],q=b["default"],r=c["default"],s=d["default"],t=e["default"],u=f["default"],v=g["default"],w=h["default"],x=i["default"],y=j["default"],z=k["default"],A=l,B=q.RSVP,C=(B.Promise,A.o_create),D=A.a_forEach,E=A.a_map;o.prototype={waitForActivation:function(){return this._waitForActivationDeferral().promise},updateData:function(a,b){oasis.portFor("data").send("updateData",{bucket:a,object:b})},initializeChildCards:function(a){var b,c={};if(this.childCards){if(this.conductor=new p(c),this.conductorConfiguration)for(b in this.conductorConfiguration)this.conductor.configure(b,this.conductorConfiguration[b]);if(this.conductor.addDefaultCapability("xhr",z.extend({upstream:this.consumers.xhr,transformRequest:function(a,b){var c=this.sandbox.options.url;return"get"===a&&(b.args=E.call(b.args,function(a){var b=PathUtils.cardResourceUrl(c,a);return PathUtils.cardResourceUrl(n(),b)})),b}})),this.services)for(b in this.services)this.conductor.addDefaultCapability(b,this.services[b]);this.loadDataForChildCards&&this.loadDataForChildCards(a);for(b in this.childCards){var d=this.childCards[b];this.conductor.loadData(d.url,d.id,d.data),d.card=this.conductor.load(d.url,d.id,d.options)}}},initializeDOM:function(){this.childCards&&D.call(this.childCards,function(a){a.card.appendTo(document.body)})},render:function(){},defer:function(a){var b=B.defer();return a&&b.promise.then(a).fail(B.rethrow),b},activateWhen:function(a,b){var c=this;return this._waitForActivationDeferral().resolve(B.all([a].concat(b)).then(function(a){return c.initializeChildCards&&c.initializeChildCards(a[0]),c.activate?c.activate(a[0]):void 0}))},_waitForActivationDeferral:function(){return this._activationDeferral||(this._activationDeferral=B.defer(),this._activationDeferral.promise.fail(B.rethrow)),this._activationDeferral}},p.card=function(a){return new o(a)}}),b("conductor/card_dependencies",["exports"],function(a){"use strict";function b(){this.requiredJavaScriptURLs=[],this.requiredCSSURLs=[]}b.prototype={requireJavaScript:function(a){this.requiredJavaScriptURLs.push(a)},requireCSS:function(a){this.requiredCSSURLs.push(a)}},a["default"]=b}),b("conductor/card_reference",["oasis","exports"],function(a,b){"use strict";function c(a){this.sandbox=a;return this}{var d=a["default"],e=d.RSVP;e.Promise}c.prototype={waitForLoad:function(){var a=this;return this._loadPromise||(this._loadPromise=this.sandbox.waitForLoad().then(function(){return a}).fail(e.rethrow)),this._loadPromise},metadataFor:function(a){return this.sandbox.metadataPort.request("metadataFor",a)},instruct:function(a){return this.sandbox.assertionPort.send("instruct",a)},appendTo:function(a){if("string"==typeof a){var b=a;if(a=document.querySelector(b),!a)throw new Error("You are trying to append to '"+b+"' but no element matching it was found")}return a.appendChild(this.sandbox.el),this.waitForLoad()},render:function(a,b){var c=this;this.sandbox.activatePromise.then(function(){c.sandbox.renderPort.send("render",[a,b])}).fail(e.rethrow)},updateData:function(a,b){var c=this.sandbox;c.activatePromise.then(function(){c.dataPort.send("updateData",{bucket:a,data:b})}).fail(e.rethrow)},wiretap:function(a,b){this.sandbox.wiretap(function(){a.apply(b,arguments)})},destroy:function(){this.sandbox.conductor.unload(this)}},d.RSVP.EventTarget.mixin(c.prototype),b["default"]=c}),b("conductor/data_consumer",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Consumer.extend({events:{initializeData:function(a){this.card.data=a,this.card.deferred.data.resolve(a)},updateData:function(a){"*"===a.bucket?this.card.data=a.data:this.card.data[a.bucket]=a.data,this.card.didUpdateData&&this.card.didUpdateData(a.bucket,a.data)}}});b["default"]=d}),b("conductor/data_service",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Service.extend({initialize:function(a){var b=this.sandbox.data;this.send("initializeData",b),this.sandbox.dataPort=a},events:{updateData:function(a){this.sandbox.conductor.updateData(this.sandbox.card,a.bucket,a.object)}}});b["default"]=d}),b("conductor/dom",["exports"],function(a){"use strict";var b={};"undefined"!=typeof window&&(b.getComputedStyleProperty=window.getComputedStyle?function(a,b){return window.getComputedStyle(a)[b]}:function(a,b){var c=b.replace(/-(\w)/g,function(a,b){return b.toUpperCase()});return a.currentStyle[c]}),b.createStyleElement=function(a){var b=document.createElement("style");return b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),b},a["default"]=b}),b("conductor/error",["exports"],function(a){"use strict";function b(a){throw"object"==typeof console&&console.assert&&console.error&&(console.error(a.stack),console.assert(!1,a.message)),setTimeout(function(){throw a},1),a}function c(){return console.warn?console.warn.apply(this,arguments):void 0}a.error=b,a.warn=c}),b("conductor/height_consumer",["oasis","conductor","conductor/dom","exports"],function(a,b,c,d){"use strict";var e=a["default"],f=(b["default"],c["default"]),g=window.MutationObserver||window.WebKitMutationObserver,h=e.Consumer.extend({autoUpdate:!0,update:function(a){if("undefined"==typeof a){var b,c,d=0,e=0,g=document.body.childNodes,h=g.length,i=0,j=0,k=["marginTop","marginBottom","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],l=["marginLeft","marginRight","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"];for(b=0;b<k.length;++b)i+=parseInt(f.getComputedStyleProperty(document.body,k[b]),10);for(b=0;b<l.length;++b)j+=parseInt(f.getComputedStyleProperty(document.body,l[b]),10);for(b=0;h>b;++b)c=g[b],1===c.nodeType&&(d=Math.max(d,c.clientWidth+j),e=Math.max(e,c.clientHeight+i));a={width:d,height:e}}this.send("resize",a)},setUpAutoupdate:function(){var a=this,b=new g(function(){a.update()});b.observe(document.documentElement,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1,attributeFilter:["style","className"]})}});d["default"]=h}),b("conductor/height_service",["oasis","conductor/dom","exports"],function(a,b,c){"use strict";function d(a,b){var c=f.getComputedStyleProperty(a,"max"+b);return"none"===c?1/0:parseInt(c,10)}var e=a["default"],f=b["default"],g=e.Service.extend({initialize:function(a){var b;(b=this.sandbox.el)&&e.RSVP.EventTarget.mixin(b),this.sandbox.heightPort=a},events:{resize:function(a){if(this.sandbox.el){var b=this.sandbox.el,c=d(b,"Width"),e=d(b,"Height"),f=Math.min(a.width,c),g=Math.min(a.height,e);b.style.width=f+"px",b.style.height=g+"px",b.trigger("resize",{width:f,height:g})}}}});c["default"]=g}),b("conductor/inline_adapter",["oasis/util","oasis/inline_adapter","exports"],function(a,b,c){"use strict";var d=a.extend,e=b["default"],f=d(e,{wrapResource:function(a){var b="var _globalOasis = window.oasis; window.oasis = oasis;try {"+a+" } finally {window.oasis = _globalOasis;}";return new Function("oasis",b)}}),g=new f;g.addUnsupportedCapability("height"),c["default"]=g}),b("conductor/lang",["oasis/shims","exports"],function(a,b){"use strict";function c(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function d(a,b){var c=[];for(var d in a)a[d]!==b[d]&&c.push(d);return c}a.a_indexOf,a.a_filter;b.copy=c,b.setDiff=d}),b("conductor/lifecycle_consumer",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Consumer.extend({initialize:function(){var a=this;this.card.waitForActivation().then(function(){a.send("activated")})}});b["default"]=d}),b("conductor/lifecycle_service",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Service.extend({events:{activated:function(){this.sandbox.activateDefered.resolve()}}});b["default"]=d}),b("conductor/metadata_consumer",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Consumer.extend({requests:{metadataFor:function(a){if("*"===a){var b=[],d=[];for(var e in this.card.options.metadata)b.push(this.card.metadata[e].call(this.card)),d.push(e);return c.RSVP.all(b).then(function(a){for(var b={},c=0;c<a.length;c++){var e=d[c];for(var f in a[c])b[e+":"+f]=a[c][f]}return b})}return this.card.metadata[a].call(this.card)}}});b["default"]=d}),b("conductor/metadata_service",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Service.extend({initialize:function(a){this.sandbox.metadataPort=a}});b["default"]=d}),b("conductor/multiplex_service",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Service.extend({initialize:function(){this.port.all(function(a,b){"@request:"===a.substr(0,"@request:".length)?this.propagateRequest(a,b):this.propagateEvent(a,b)},this)},propagateEvent:function(a,b){var c="function"==typeof this.transformEvent?this.transformEvent(a,b):b;this.upstream.send(a,c)},propagateRequest:function(a,b){var c=a.substr("@request:".length),d=this.upstream.port,e="function"==typeof this.transformRequest?this.transformRequest(c,b):b,f=e.requestId,g=e.args,h=this;g.unshift(c),d.request.apply(d,g).then(function(a){h.send("@response:"+c,{requestId:f,data:a})})}});b["default"]=d}),b("conductor/nested_wiretapping_consumer",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Consumer;b["default"]=d}),b("conductor/nested_wiretapping_service",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Service.extend({initialize:function(a){this.sandbox.nestedWiretappingPort=a}});b["default"]=d}),b("conductor/path",["oasis/shims","exports"],function(a,b){"use strict";var c=a.a_filter,d=window.PathUtils={dirname:function(a){return a.substring(0,a.lastIndexOf("/"))},expandPath:function(a){for(var b=a.split("/"),d=0;d<b.length;++d)if(".."===b[d])for(var e=d-1;e>=0;--e)if(void 0!==b[e]){b[d]=b[e]=void 0;break}return c.call(b,function(a){return void 0!==a}).join("/")},cardResourceUrl:function(a,b){var c;return c=/^((http(s?):)|\/)/.test(b)?b:d.dirname(a)+"/"+b,d.expandPath(c)}};b["default"]=d}),b("conductor/render_consumer",["oasis","conductor/dom","exports"],function(a,b,c){"use strict";function d(){var a,b=document.head||document.documentElement.getElementsByTagName("head")[0],c="";c+="body {",c+="  margin: 0px;",c+="  padding: 0px;",c+="}",c+="iframe {",c+="  display: block;",c+="}",a=f.createStyleElement(c),b.insertBefore(a,b.children[0])}var e=a["default"],f=b["default"],g=!1,h=e.Consumer.extend({events:{render:function(a){g||(d(),this.card.initializeDOM&&this.card.initializeDOM(),g=!0),this.card.render.apply(this.card,a)}}});c["default"]=h}),b("conductor/render_service",["oasis","exports"],function(a,b){"use strict";var c=a["default"],d=c.Service.extend({initialize:function(a){this.sandbox.renderPort=a}});b["default"]=d}),b("conductor/services",["conductor/assertion_service","conductor/xhr_service","conductor/render_service","conductor/metadata_service","conductor/data_service","conductor/lifecycle_service","conductor/height_service","conductor/nested_wiretapping_service","exports"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=a["default"],k=b["default"],l=c["default"],m=d["default"],n=e["default"],o=f["default"],p=g["default"],q=h["default"],r={xhr:k,metadata:m,assertion:j,render:l,lifecycle:o,data:n,height:p,nestedWiretapping:q};i.services=r;var s=["xhr","metadata","render","data","lifecycle","height","nestedWiretapping"];i.capabilities=s}),b("conductor/version",["exports"],function(a){"use strict";a["default"]="0.3.0"}),b("conductor/xhr_consumer",["oasis","oasis/shims","conductor/dom","exports"],function(a,b,c,d){"use strict";var e=a["default"],f=b,g=c["default"],h=f.a_forEach,i=e.Consumer.extend({initialize:function(){function a(a){return function(b){var c=i.request("get",b);d.push(c),c.then(a)}}function b(a){var b=document.createElement("script"),c=document.head||document.documentElement.getElementsByTagName("head")[0];b.text=b.textContent=a,c.appendChild(b)}function c(a){var b=document.head||document.documentElement.getElementsByTagName("head")[0],c=g.createStyleElement(a);b.appendChild(c)}var d=[],f=[],i=this.port,j=this.card.deferred.xhr;h.call(Conductor._dependencies.requiredJavaScriptURLs,function(a){var b=i.request("get",a);f.push(b),d.push(b)}),e.RSVP.all(f).then(function(a){h.call(a,b)}).fail(e.RSVP.rethrow),h.call(Conductor._dependencies.requiredCSSURLs,a(c)),e.RSVP.all(d).then(function(){j.resolve()}).fail(e.RSVP.rethrow)}});d["default"]=i}),b("conductor/xhr_service",["oasis","conductor/path","oasis/xhr","exports"],function(a,b,c,d){"use strict";var e=a["default"],f=b["default"],g=c.xhr,h=e.Service.extend({requests:{get:function(a){var b=this,c=f.cardResourceUrl(b.sandbox.options.url,a);return g(c)}}});d["default"]=h}),b("oasis",["rsvp","oasis/logger","oasis/version","oasis/util","oasis/config","oasis/sandbox","oasis/sandbox_init","oasis/xhr","oasis/events","oasis/service","oasis/connect","oasis/iframe_adapter","oasis/webworker_adapter","oasis/inline_adapter","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(){this.packages={},this.requestId=0,this.oasisId="oasis"+ +new Date,this.consumers={},this.services=[],this.ports={},this.handlers={},this.receivedPorts=!1,this.configuration=new v,this.events=new z,this.didCreate()}var q=a,r=b["default"],s=c["default"],t=d.assert,u=d.delegate,v=e["default"],w=f["default"],x=g["default"],y=h.xhr,z=i["default"],A=j["default"],B=k.connect,C=k.connectCapabilities,D=k.portFor,E=l["default"],F=m["default"],G=n["default"];p.Version=s,p.Service=p.Consumer=A,p.RSVP=q,p.reset=function(){p.adapters={iframe:new E,webworker:new F,inline:new G}},p.reset(),p.prototype={logger:r,log:function(){this.logger.log.apply(this.logger,arguments)},on:u("events","on"),off:u("events","off"),trigger:u("events","trigger"),didCreate:function(){},xhr:y,createSandbox:function(a){return new w(this,a)},register:function(a){t(a.capabilities,"You are trying to register a package without any capabilities. Please provide a list of requested capabilities, or an empty array ([])."),this.packages[a.url]=a},configure:function(a,b){this.configuration[a]=b},autoInitializeSandbox:x,connect:B,connectCapabilities:C,portFor:D},o["default"]=p}),b("oasis/base_adapter",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/connect","oasis/message_channel","exports"],function(a,b,c,d,e,f,g){"use strict";function h(){this._unsupportedCapabilities=[]}var i=b["default"],j=c.mustImplement,k=d.addEventListener,l=d.removeEventListener,m=d.a_indexOf,n=d.a_filter,o=(e.connectCapabilities,f.PostMessageMessageChannel);h.prototype={initializeSandbox:j("BaseAdapter","initializeSandbox"),name:j("BaseAdapter","name"),unsupportedCapabilities:function(){return this._unsupportedCapabilities},addUnsupportedCapability:function(a){this._unsupportedCapabilities.push(a)},filterCapabilities:function(a){var b=this._unsupportedCapabilities;return n.call(a,function(a){var c=m.call(b,a);return-1===c})},createChannel:function(a){var b=new o(a);return b.port1.start(),b},environmentPort:function(a,b){return b.port1},sandboxPort:function(a,b){return b.port2},proxyPort:function(a,b){return b},connectSandbox:function(a,b){function c(e){e.data.isOasisInitialization&&(l(a,"message",c),d.initializeOasisSandbox(e,b))}var d=this;i.log("Sandbox listening for initialization message"),k(a,"message",c),d.oasisLoaded(b)},initializeOasisSandbox:function(a,b){var c=this;b.configuration.eventCallback(function(){i.log("sandbox: received initialization message."),b.connectCapabilities(a.data.capabilities,a.ports),c.didConnect(b)})},createInitializationMessage:function(a){return{isOasisInitialization:!0,capabilities:a._capabilitiesToConnect}},oasisLoadedMessage:"oasisSandboxLoaded",sandboxInitializedMessage:"oasisSandboxInitialized"},g["default"]=h}),b("oasis/config",["exports"],function(a){"use strict";function b(){this.eventCallback=function(a){a()},this.allowSameOrigin=!1,this.reconnect="verify"}a["default"]=b}),b("oasis/connect",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/message_channel","exports"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){var d=a.ports[b];d?(o.log(a.oasisId,"sandbox: found port, setting up '"+b+"'"),c.setupCapability(d),c.promise?c.promise.then(function(){d.start()}).fail(n.rethrow):d.start()):a.receivedPorts?(o.log("No port was sent for capability '"+b+"'"),c.rejectCapability()):(o.log("No port found, saving handler for '"+b+"'"),a.handlers[b]=c)}function h(a,b,c){return"object"==typeof a?k(this,a.consumers):b?l(this,a,b,c):m(this,a)}function i(a,b){var c=this;q.call(a,function(a,d){var e=c.handlers[a],f=new r(c,b[d]);e&&(o.log("Invoking handler for '"+a+"'"),n.resolve(e.setupCapability(f)).then(function(){f.start()}).fail(n.rethrow)),c.ports[a]=f});for(var d in c.handlers)c.ports[d]||c.handlers[d].rejectCapability();this.receivedPorts=!0}function j(a){var b=this.ports[a];return p(b,"You asked for the port for the '"+a+"' capability, but the environment did not provide one."),b}function k(a,b){function c(b,c){return function(d){var e=new b(d);a.consumers[c]=e,e.initialize(d,c)}}function d(a){return function(){b[a].prototype.error()}}for(var e in b)g(a,e,{setupCapability:c(b[e],e),rejectCapability:d(e)})}function l(a,b,c,d){o.log("Connecting to '"+b+"' with callback."),g(a,b,{setupCapability:function(a){c(a)},rejectCapability:function(){d&&d()}})}function m(a,b){o.log("Connecting to '"+b+"' with promise.");var c=n.defer();return g(a,b,{promise:c.promise,setupCapability:function(a){return c.resolve(a),c.promise},rejectCapability:function(){c.reject()}}),c.promise}var n=a,o=b["default"],p=c.assert,q=d.a_forEach,r=e.PostMessagePort;f.registerHandler=g,f.connect=h,f.connectCapabilities=i,f.portFor=j}),b("oasis/events",["exports"],function(a){"use strict";function b(){this.listenerArrays={}}var c=Array.prototype.slice;b.prototype={on:function(a,b){var c=this.listenerArrays[a]=this.listenerArrays[a]||[];c.push(b)},off:function(a,b){var c=this.listenerArrays[a];if(c)for(var d=0;d<c.length;++d)if(c[d]===b){c.splice(d,1);break}},clear:function(a){delete this.listenerArrays[a]},trigger:function(a){var b=this.listenerArrays[a];if(b)for(var d=c.call(arguments,1),e=0;e<b.length;++e)b[e].apply(null,d)}},a["default"]=b}),b("oasis/iframe_adapter",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/base_adapter","exports"],function(a,b,c,d,e,f){"use strict";function g(a,b){var c,d=document.createElement("iframe");if((a.configuration.allowSameOrigin&&void 0!==d.sandbox||void 0===d.sandbox)&&(c=document.createElement("a"),c.href=b,!c.host||c.protocol===window.location.protocol&&c.host===window.location.host))throw new Error("Security: iFrames from the same host cannot be sandboxed in older browsers and is disallowed.  For HTML5 browsers supporting the `sandbox` attribute on iframes, you can add the `allow-same-origin` flagonly if you host the sandbox on a separate domain.")}function h(a,b){function c(){a.onerror(new Error("Cannot reconnect null origins unless `reconnect` is set to 'any'.  `reconnect: 'verify' requires `allowSameOrigin: true`"))}var d,e;if(a.firstLoad||"any"===a.options.reconnect)return!0;if(a.oasis.configuration.allowSameOrigin&&"null"!==b.origin){if(d=document.createElement("a"),e=document.createElement("a"),d.href=a.options.url,e.href=b.origin,e.protocol===d.protocol&&e.host===d.host)return!0;c()}else c()}var i=a,j=b["default"],k=(c.assert,c.extend),l=(d.a_forEach,d.addEventListener),m=d.removeEventListener,n=d.a_map,o=e["default"],p=k(o,{initializeSandbox:function(a){var b=a.options,c=document.createElement("iframe"),d=["allow-scripts"];a.oasis.configuration.allowSameOrigin&&d.push("allow-same-origin"),b&&b.sandbox&&b.sandbox.popups&&d.push("allow-popups"),c.name=a.options.url+"?uuid="+UUID.generate(),c.sandbox=d.join(" "),c.seamless=!0,b.width?c.width=b.width:b.height&&(c.height=b.height),c.errorHandler=function(b){if(b.data.sandboxException){try{if(b.source!==c.contentWindow)return}catch(d){return}a.onerror(b.data.sandboxException)}},l(window,"message",c.errorHandler),g(a.oasis,a.options.url),c.src=a.options.url,j.log("Initializing sandbox "+c.name),a._waitForLoadDeferred().resolve(new i.Promise(function(b){c.initializationHandler=function(d){if(d.data===a.adapter.sandboxInitializedMessage){try{if(d.source!==c.contentWindow)return}catch(e){return}m(window,"message",c.initializationHandler),a.oasis.configuration.eventCallback(function(){j.log("container: iframe sandbox has initialized (capabilities connected)"),b(a)})}},l(window,"message",c.initializationHandler)})),a.el=c,c.oasisLoadHandler=function(b){if(b.data===a.adapter.oasisLoadedMessage){try{if(b.source!==c.contentWindow)return}catch(d){return}j.log("container: iframe sandbox has loaded Oasis"),h(a,b)&&a.createAndTransferCapabilities(),"none"===a.options.reconnect&&m(window,"message",c.oasisLoadHandler)}},l(window,"message",c.oasisLoadHandler)},startSandbox:function(a){var b=document.head||document.documentElement.getElementsByTagName("head")[0];b.appendChild(a.el)},terminateSandbox:function(a){var b=a.el;a.terminated=!0,b.loadHandler&&m(b,"load",b.loadHandler),m(window,"message",b.initializationHandler),m(window,"message",b.oasisLoadHandler),b.parentNode&&(j.log("Terminating sandbox ",a.el.name),b.parentNode.removeChild(b)),a.el=null},connectPorts:function(a,b){var c=n.call(b,function(a){return a.port}),d=this.createInitializationMessage(a);a.terminated||Window.postMessage(a.el.contentWindow,d,"*",c)},connectSandbox:function(a){return o.prototype.connectSandbox.call(this,window,a)},oasisLoaded:function(){window.parent.postMessage(this.oasisLoadedMessage,"*",[])},didConnect:function(){window.parent.postMessage(this.sandboxInitializedMessage,"*",[])},name:function(a){return a.el.name}});f["default"]=p}),b("oasis/inline_adapter",["rsvp","oasis/logger","oasis/util","oasis/config","oasis/shims","oasis/xhr","oasis/base_adapter","exports"],function(a,b,c,d,e,f,g,h){"use strict";var i=a,j=b["default"],k=(c.assert,c.extend),l=c.noop,m=(d.configuration,e.a_forEach,e.a_map),n=f.xhr,o=g["default"],p=k(o,{initializeSandbox:function(a){a.el=document.createElement("div");a.sandboxedOasis=new Oasis;a.sandboxedOasis.sandbox=a,i.resolve().then(function(){a.createAndTransferCapabilities()})},startSandbox:function(a){var b=document.body||document.documentElement.getElementsByTagName("body")[0];b.appendChild(a.el)},terminateSandbox:function(a){var b=a.el;b.parentNode&&(j.log("Terminating sandbox ",a.el.name),b.parentNode.removeChild(b)),a.el=null},connectPorts:function(a,b){var c=m.call(b,function(a){return a.port}),d=this.createInitializationMessage(a),e={data:d,ports:c};this.connectSandbox(a.sandboxedOasis,e)},fetchResource:function(a,b){var c=this;return n(a,{dataType:"text"},b).then(function(a){return c.wrapResource(a)}).fail(i.rethrow)},wrapResource:function(a){return new Function("oasis",a)},connectSandbox:function(a,b){return this.initializeOasisSandbox(b,a)},oasisLoaded:l,didConnect:function(a){function b(b){return j.log("sandbox: inline sandbox initialized"),b(a),a.sandbox}function c(){return new i.Promise(function(c){c(d.fetchResource(a.sandbox.options.url,a).then(b))})}var d=this;return a.sandbox._waitForLoadDeferred().resolve(c().fail(i.rethrow))}});h["default"]=p}),b("oasis/logger",["exports"],function(a){"use strict";function b(){this.enabled=!1}b.prototype={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},log:function(){if(c.enabled)if("undefined"!=typeof console&&"function"==typeof console.log)console.log.apply(console,arguments);else if("undefined"!=typeof console&&"object"==typeof console.log)try{switch(arguments.length){case 1:console.log(arguments[0]);break;case 2:console.log(arguments[0],arguments[1]);break;default:console.log(arguments[0],arguments[1],arguments[2])}}catch(a){}}};var c=new b;a["default"]=c}),b("oasis/message_channel",["rsvp","oasis/util","exports"],function(a,b,c){"use strict";function d(){}function e(a){return a.oasisId+"-"+a.requestId++}function f(){}var g=a,h=b.extend,i=b.mustImplement;c.OasisPort=d,d.prototype={on:i("OasisPort","on"),all:i("OasisPort","all"),off:i("OasisPort","off"),send:i("OasisPort","send"),start:i("OasisPort","start"),close:i("OasisPort","close"),request:function(a){var b=this.oasis,c=this,d=[].slice.call(arguments,1);return new g.Promise(function(f,g){var h=e(b),i=function(){c.off("@response:"+a,j),c.off("@errorResponse:"+a,k)},j=function(a){a.requestId===h&&(i(),f(a.data))},k=function(a){a.requestId===h&&(i(),g(a.data))};c.on("@response:"+a,j,c),c.on("@errorResponse:"+a,k,c),c.send("@request:"+a,{requestId:h,args:d})})},onRequest:function(a,b,c){var d=this;this.on("@request:"+a,function(e){var f=e.requestId,h=(e.args,new g.Promise(function(d,f){var g=b.apply(c,e.args);void 0!==g?d(g):f("@request:"+a+" ["+e.requestId+"] did not return a value.  If you want to return a literal `undefined` return `RSVP.resolve(undefined)`")}));h.then(function(b){d.send("@response:"+a,{requestId:f,data:b})},function(b){var c=b;b instanceof Error&&(c={message:b.message,stack:b.stack}),d.send("@errorResponse:"+a,{requestId:f,data:c})})})}},f.prototype={start:i("OasisMessageChannel","start")};var j=h(f,{initialize:function(a){this.channel=new MessageChannel,this.port1=new k(a,this.channel.port1),this.port2=new k(a,this.channel.port2)},start:function(){this.port1.start(),this.port2.start()},destroy:function(){this.port1.close(),this.port2.close(),delete this.port1,delete this.port2,delete this.channel}});c.PostMessageMessageChannel=j;var k=h(d,{initialize:function(a,b){this.oasis=a,this.port=b,this._callbacks=[]},on:function(a,b,c){function d(d){d.data.type===a&&e.configuration.eventCallback(function(){return b.call(c,d.data.data)})}var e=this.oasis;this._callbacks.push([b,d]),this.port.addEventListener("message",d)},all:function(a,b){function c(c){d.configuration.eventCallback(function(){a.call(b,c.data.type,c.data.data)})}var d=this.oasis;this.port.addEventListener("message",c)},off:function(a,b){for(var c,d=0,e=this._callbacks.length;e>d;d++)c=this._callbacks[d],c[0]===b&&this.port.removeEventListener("message",c[1])},send:function(a,b){this.port.postMessage({type:a,data:b})},start:function(){this.port.start()},close:function(){for(var a,b=0,c=this._callbacks.length;c>b;b++)a=this._callbacks[b],this.port.removeEventListener("message",a[1]);this._callbacks=[],this.port.close()}});c.PostMessagePort=k}),b("oasis/sandbox",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/message_channel","exports"],function(a,b,c,d,e,f){"use strict";
var g=a,h=b["default"],i=c.assert,j=c.uniq,k=c.reverseMerge,l=d.a_forEach,m=d.a_reduce,n=(d.a_filter,e.OasisPort),o=function(a,b){b=k(b||{},{reconnect:a.configuration.reconnect});var c=b.reconnect;i("none"===c||"verify"===c||"any"===c,"`reconnect` must be one of 'none', 'verify' or 'any'.  '"+c+"' is invalid."),this.connections={},this.wiretaps=[],this.oasis=a;var d=a.packages[b.url],e=b.capabilities;e||(i(d,"You are trying to create a sandbox from an unregistered URL without providing capabilities. Please use Oasis.register to register your package or pass a list of capabilities to createSandbox."),e=d.capabilities),d=d||{},this.adapter=b.adapter||Oasis.adapters.iframe,this._capabilitiesToConnect=this._filterCapabilities(e),this.envPortDefereds={},this.sandboxPortDefereds={},this.channels={},this.capabilities={},this.options=b,this.firstLoad=!0;this.promisePorts(),this.adapter.initializeSandbox(this)};o.prototype={waitForLoad:function(){return this._waitForLoadDeferred().promise},wiretap:function(a){this.wiretaps.push(a)},connect:function(a){var b=this.envPortDefereds[a].promise;return i(b,"Connect was called on '"+a+"' but no such capability was registered."),b},createAndTransferCapabilities:function(){this.firstLoad||this.promisePorts(),this.createChannels(),this.connectPorts(),this.firstLoad=!1},promisePorts:function(){l.call(this._capabilitiesToConnect,function(a){this.envPortDefereds[a]=g.defer(),this.sandboxPortDefereds[a]=g.defer()},this)},createChannels:function(){var a=this,b=this.options.services||{},c=this.channels;l.call(this._capabilitiesToConnect,function(d){h.log("container: Will create port for '"+d+"'");var e,f,g=b[d];if(g instanceof n)f=this.adapter.proxyPort(this,g),this.capabilities[d]=g;else{e=c[d]=this.adapter.createChannel(a.oasis);var i=this.adapter.environmentPort(this,e),j=this.adapter.sandboxPort(this,e);h.log("container: Wiretapping '"+d+"'"),i.all(function(a,b){l.call(this.wiretaps,function(c){c(d,{type:a,data:b,direction:"received"})})},this),l.call(this.wiretaps,function(a){var b=i.send;i.send=function(c,e){a(d,{type:c,data:e,direction:"sent"}),b.apply(i,arguments)}}),g&&(h.log("container: Creating service for '"+d+"'"),g=new g(i,this),g.initialize(i,d),a.oasis.services.push(g),this.capabilities[d]=g),f=j,this.envPortDefereds[d].resolve(i)}h.log("container: Port created for '"+d+"'"),this.sandboxPortDefereds[d].resolve(f)},this)},destroyChannels:function(){for(var a in this.channels)this.channels[a].destroy(),delete this.channels[a];this.channels=[]},connectPorts:function(){var a=this,b=m.call(this._capabilitiesToConnect,function(b,c){return b.concat(a.sandboxPortDefereds[c].promise)},[]);g.all(b).then(function(b){h.log("container: All "+b.length+" ports created.  Transferring them."),a.adapter.connectPorts(a,b)}).fail(g.rethrow)},start:function(a){this.adapter.startSandbox(this,a)},terminate:function(){var a=this;if(!this.isTerminated){this.isTerminated=!0,this.adapter.terminateSandbox(this),this.destroyChannels();for(var b=0;b<a.oasis.services.length;b++)a.oasis.services[b].destroy(),delete a.oasis.services[b];a.oasis.services=[]}},onerror:function(a){throw a},name:function(){return this.adapter.name(this)},_filterCapabilities:function(a){return j.call(this.adapter.filterCapabilities(a))},_waitForLoadDeferred:function(){return this._loadDeferred||(this._loadDeferred=g.defer()),this._loadDeferred}},f["default"]=o}),b("oasis/sandbox_init",["exports"],function(a){"use strict";function b(){if("undefined"!=typeof window){if(/PhantomJS/.test(navigator.userAgent))return;window.parent&&window.parent!==window&&Oasis.adapters.iframe.connectSandbox(this)}else Oasis.adapters.webworker.connectSandbox(this)}a["default"]=b}),b("oasis/service",["oasis/shims","exports"],function(a,b){"use strict";function c(a,b){function c(a){return function(){return a.apply(f,arguments)}}var d,e,f=this;this.sandbox=b,this.port=a;for(d in this.events)e=this.events[d],a.on(d,c(e));for(d in this.requests)e=this.requests[d],a.onRequest(d,c(e))}var d=a.o_create;c.prototype={initialize:function(){},error:function(){},destroy:function(){},send:function(){return this.port.send.apply(this.port,arguments)},request:function(){return this.port.request.apply(this.port,arguments)}},c.extend=function e(a){function b(){b.prototype.init&&b.prototype.init.call(this),c.apply(this,arguments)}var c=this;b.extend=e;var f=b.prototype=d(this.prototype);for(var g in a)f[g]=a[g];return b},b["default"]=c}),b("oasis/shims",["exports"],function(a){"use strict";function b(a,b){if(f.prototype=a,a=new f,b){f.prototype=a;for(var c in b)f.prototype[c]=b[c].value;a=new f}return f.prototype=null,a}function c(a,b,c){return a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):void 0}function d(a,b,c){return a.removeEventListener?a.removeEventListener(b,c):a.detachEvent?a.detachEvent("on"+b,c):void 0}function e(a){return a&&Function.prototype.toString.call(a).indexOf("[native code]")>-1}var f=function(){};a.o_create=b,a.addEventListener=c,a.removeEventListener=d;var g=e(Array.prototype.forEach)?Array.prototype.forEach:function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments[1],e=0;c>e;e++)e in b&&a.call(d,b[e],e,b)};a.a_forEach=g;var h=e(Array.prototype.reduce)?Array.prototype.reduce:function(a,b){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d=0,e=this.length>>>0,f=!1;for(1<arguments.length&&(c=b,f=!0);e>d;++d)this.hasOwnProperty(d)&&(f?c=a(c,this[d],d,this):(c=this[d],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return c};a.a_reduce=h;var i=e(Array.prototype.map)?Array.prototype.map:function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(b&&(c=b),d=new Array(g),e=0;g>e;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d};a.a_map=i;var j=e(Array.prototype.indexOf)?Array.prototype.indexOf:function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1};a.a_indexOf=j;var k=e(Array.prototype.filter)?Array.prototype.filter:function(a){if(!this)throw new TypeError;{var b=Object(this);b.length>>>0}if("function"!=typeof a)throw new TypeError;var c=[],d=arguments[1];for(var e in b)b.hasOwnProperty(e)&&a.call(d,b[e],e,b)&&c.push(b[e]);return c};a.a_filter=k}),b("oasis/util",["oasis/shims","exports"],function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b)}function d(){}function e(a,b){return function(){throw new Error("Subclasses of "+a+" must implement "+b)}}function f(a,b){function c(){a.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}c.prototype=j(a.prototype);for(var d in b)b.hasOwnProperty(d)&&(c.prototype[d]=b[d]);return c}function g(a,b){return function(){var c=this[a];return c[b].apply(c,arguments)}}function h(){var a={};return k.call(this,function(b){var c=!a.hasOwnProperty(b);return a[b]=!0,c})}function i(a,b){for(var c in b)b.hasOwnProperty(c)&&(c in a||(a[c]=b[c]));return a}var j=a.o_create,k=a.a_filter;b.assert=c,b.noop=d,b.mustImplement=e,b.extend=f,b.delegate=g,b.uniq=h,b.reverseMerge=i}),b("oasis/version",["exports"],function(a){"use strict";a["default"]="0.4.0"}),b("oasis/webworker_adapter",["rsvp","oasis/logger","oasis/util","oasis/shims","oasis/base_adapter","exports"],function(a,b,c,d,e,f){"use strict";var g=a,h=b["default"],i=(c.assert,c.extend),j=(d.a_forEach,d.addEventListener),k=d.removeEventListener,l=e["default"],m=i(l,{type:"js",initializeSandbox:function(a){var b=new Worker(a.options.url);b.name=a.options.url+"?uuid="+UUID.generate(),a.worker=b,b.errorHandler=function(b){b.data.sandboxException&&a.onerror(b.data.sandboxException)},j(b,"message",b.errorHandler),a._waitForLoadDeferred().resolve(new g.Promise(function(c){b.initializationHandler=function(d){a.oasis.configuration.eventCallback(function(){d.data===a.adapter.sandboxInitializedMessage&&(k(b,"message",b.initializationHandler),h.log("worker sandbox initialized"),c(a))})},j(b,"message",b.initializationHandler)})),b.loadHandler=function(c){a.oasis.configuration.eventCallback(function(){c.data===a.adapter.oasisLoadedMessage&&(k(b,"message",b.loadHandler),h.log("worker sandbox initialized"),a.createAndTransferCapabilities())})},j(b,"message",b.loadHandler)},startSandbox:function(){},terminateSandbox:function(a){var b=a.worker;k(b,"message",b.loadHandler),k(b,"message",b.initializationHandler),a.worker.terminate()},connectPorts:function(a,b){var c=b.map(function(a){return a.port}),d=this.createInitializationMessage(a);Worker.postMessage(a.worker,d,c)},connectSandbox:function(a){return l.prototype.connectSandbox.call(this,self,a)},name:function(a){return a.worker.name},oasisLoaded:function(){postMessage(this.oasisLoadedMessage,[])},didConnect:function(){postMessage(this.sandboxInitializedMessage,[])}});f["default"]=m}),b("oasis/xhr",["rsvp","oasis/util","exports"],function(a,b,c){"use strict";function d(a){var b=a.dataType;return b&&q[b]?q[b]:q["*"]}function e(a,b){a.setRequestHeader("Accepts",d(b))}function f(a){return a.status}function g(){return 200}function h(a,b){if(b){var c=o.call(arguments,2);c.unshift(a),b.trigger.apply(b,c)}}function i(a,b,c){return!c&&this instanceof Oasis&&(c=this),b||(b=p),new m.Promise(function(d,e){var f=new j;f.open("get",a,!0),k(f,b),b.timeout&&(f.timeout=b.timeout),f.onload=function(){h("xhr.load",c,a,b,f);var g=l(f);g>=200&&300>g?d(f.responseText):e(f)},f.onprogress=n,f.ontimeout=function(){h("xhr.timeout",c,a,b,f),e(f)},f.onerror=function(){h("xhr.error",c,a,b,f),e(f)},h("xhr.send",c,a,b,f),f.send()})}var j,k,l,m=a,n=b.noop,o=Array.prototype.slice,p={},q={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};try{"withCredentials"in new XMLHttpRequest?(j=XMLHttpRequest,k=e,l=f):"undefined"!=typeof XDomainRequest&&(j=XDomainRequest,k=n,l=g)}catch(r){"undefined"!=typeof XDomainRequest&&(j=XDomainRequest,k=n,l=g)}c.xhr=i}),b("rsvp/-internal",["./utils","./instrument","./config","exports"],function(a,b,c,d){"use strict";function e(){}function f(a){try{return a.then}catch(b){return B.error=b,B}}function g(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function h(a,b,c){x.async(function(a){var d=!1,e=g(c,b,function(c){d||(d=!0,b!==c?k(a,c):m(a,c))},function(b){d||(d=!0,n(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,n(a,e))},a)}function i(a,b){a._onerror=null,b._state===z?m(a,b._result):a._state===A?n(a,b._result):o(b,void 0,function(c){b!==c?k(a,c):m(a,c)},function(b){n(a,b)})}function j(a,b){if(b instanceof a.constructor)i(a,b);else{var c=f(b);c===B?n(a,B.error):void 0===c?m(a,b):v(c)?h(a,b,c):m(a,b)}}function k(a,b){a===b?m(a,b):u(b)?j(a,b):m(a,b)}function l(a){a._onerror&&a._onerror(a._result),p(a)}function m(a,b){a._state===y&&(a._result=b,a._state=z,0===a._subscribers.length?x.instrument&&w("fulfilled",a):x.async(p,a))}function n(a,b){a._state===y&&(a._state=A,a._result=b,x.async(l,a))}function o(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+z]=c,e[f+A]=d,0===f&&a._state&&x.async(p,a)}function p(a){var b=a._subscribers,c=a._state;if(x.instrument&&w(c===z?"fulfilled":"rejected",a),0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?s(c,d,e,f):e(f);a._subscribers.length=0}}function q(){this.error=null}function r(a,b){try{return a(b)}catch(c){return C.error=c,C}}function s(a,b,c,d){var e,f,g,h,i=v(c);if(i){if(e=r(c,d),e===C?(h=!0,f=e.error,e=null):g=!0,b===e)return void n(b,new TypeError("A promises callback cannot return that same promise."))}else e=d,g=!0;b._state!==y||(i&&g?k(b,e):h?n(b,f):a===z?m(b,e):a===A&&n(b,e))}function t(a,b){try{b(function(b){k(a,b)},function(b){n(a,b)})}catch(c){n(a,c)}}var u=a.objectOrFunction,v=a.isFunction,w=(a.now,b["default"]),x=c.config,y=void 0,z=1,A=2,B=new q,C=new q;d.noop=e,d.resolve=k,d.reject=n,d.fulfill=m,d.subscribe=o,d.publish=p,d.publishRejection=l,d.initializePromise=t,d.invokeCallback=s,d.FULFILLED=z,d.REJECTED=A}),b("rsvp/all-settled",["./enumerator","./promise","./utils","exports"],function(a,b,c,d){"use strict";function e(a,b,c){this._superConstructor(a,b,!1,c)}var f=a["default"],g=a.makeSettledResult,h=b["default"],i=c.o_create;e.prototype=i(f.prototype),e.prototype._superConstructor=f,e.prototype._makeResult=g,e.prototype._validationError=function(){return new Error("allSettled must be called with an array")},d["default"]=function(a,b){return new e(h,a,b).promise}}),b("rsvp/all",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.all(a,b)}}),b("rsvp/asap",["exports"],function(a){"use strict";function b(){return function(){process.nextTick(f)}}function c(){var a=0,b=new j(f),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function d(){var a=new MessageChannel;return a.port1.onmessage=f,function(){a.port2.postMessage(0)}}function e(){return function(){setTimeout(f,1)}}function f(){for(var a=0;g>a;a+=2){var b=l[a],c=l[a+1];b(c),l[a]=void 0,l[a+1]=void 0}g=0}var g=0;a["default"]=function(a,b){l[g]=a,l[g+1]=b,g+=2,2===g&&h()};var h,i="undefined"!=typeof window?window:{},j=i.MutationObserver||i.WebKitMutationObserver,k="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,l=new Array(1e3);h="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():j?c():k?d():e()}),b("rsvp/config",["./events","exports"],function(a,b){"use strict";function c(a,b){return"onerror"===a?void e.on("error",b):2!==arguments.length?e[a]:void(e[a]=b)}var d=a["default"],e={instrument:!1};d.mixin(e),b.config=e,b.configure=c}),b("rsvp/defer",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a){var b={};return b.promise=new c(function(a,c){b.resolve=a,b.reject=c},a),b}}),b("rsvp/enumerator",["./utils","./-internal","exports"],function(a,b,c){"use strict";function d(a,b,c){return a===l?{state:"fulfilled",value:c}:{state:"rejected",reason:c}}function e(a,b,c,d){this._instanceConstructor=a,this.promise=new a(h,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&j(this.promise,this._result))):i(this.promise,this._validationError())}var f=a.isArray,g=a.isMaybeThenable,h=b.noop,i=b.reject,j=b.fulfill,k=b.subscribe,l=b.FULFILLED,m=b.REJECTED,n=b.PENDING,o=!0;c.ABORT_ON_REJECTION=o,c.makeSettledResult=d,e.prototype._validateInput=function(a){return f(a)},e.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},e.prototype._init=function(){this._result=new Array(this.length)},c["default"]=e,e.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===n&&a>d;d++)this._eachEntry(c[d],d)},e.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;g(a)?a.constructor===c&&a._state!==n?(a._onerror=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(l,b,a))},e.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===n&&(this._remaining--,this._abortOnReject&&a===m?i(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&&j(d,this._result)},e.prototype._makeResult=function(a,b,c){return c},e.prototype._willSettleAt=function(a,b){var c=this;k(a,void 0,function(a){c._settledAt(l,b,a)},function(a){c._settledAt(m,b,a)})}}),b("rsvp/events",["exports"],function(a){"use strict";function b(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function c(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b}a["default"]={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,d){var e,f=c(this);e=f[a],e||(e=f[a]=[]),-1===b(e,d)&&e.push(d)},off:function(a,d){var e,f,g=c(this);return d?(e=g[a],f=b(e,d),void(-1!==f&&e.splice(f,1))):void(g[a]=[])},trigger:function(a,b){var d,e,f=c(this);if(d=f[a])for(var g=0;g<d.length;g++)(e=d[g])(b)}}}),b("rsvp/filter",["./promise","./utils","exports"],function(a,b,c){"use strict";{var d=a["default"],e=b.isFunction;b.isMaybeThenable}c["default"]=function(a,b,c){return d.all(a,c).then(function(a){if(!e(b))throw new TypeError("You must pass a function as filter's second argument.");for(var f=a.length,g=new Array(f),h=0;f>h;h++)g[h]=b(a[h]);return d.all(g,c).then(function(b){for(var c=new Array(f),d=0,e=0;f>e;e++)b[e]&&(c[d]=a[e],d++);return c.length=d,c})})}}),b("rsvp/hash-settled",["./promise","./enumerator","./promise-hash","./utils","exports"],function(a,b,c,d,e){"use strict";function f(a,b,c){this._superConstructor(a,b,!1,c)}var g=a["default"],h=b.makeSettledResult,i=c["default"],j=b["default"],k=d.o_create;f.prototype=k(i.prototype),f.prototype._superConstructor=j,f.prototype._makeResult=h,f.prototype._validationError=function(){return new Error("hashSettled must be called with an object")},e["default"]=function(a,b){return new f(g,a,b).promise}}),b("rsvp/hash",["./promise","./promise-hash","./enumerator","exports"],function(a,b,c,d){"use strict";{var e=a["default"],f=b["default"];c.ABORT_ON_REJECTION}d["default"]=function(a,b){return new f(e,a,b).promise}}),b("rsvp/instrument",["./config","./utils","exports"],function(a,b,c){"use strict";var d=a.config,e=b.now,f=[];c["default"]=function(a,b,c){1===f.push({name:a,payload:{guid:b._guidKey+b._id,eventName:a,detail:b._result,childGuid:c&&b._guidKey+c._id,label:b._label,timeStamp:e(),stack:new Error(b._label).stack}})&&setTimeout(function(){for(var a,b=0;b<f.length;b++)a=f[b],d.trigger(a.name,a.payload);f.length=0},50)}}),b("rsvp/map",["./promise","./utils","exports"],function(a,b,c){"use strict";var d=a["default"],e=(b.isArray,b.isFunction);c["default"]=function(a,b,c){return d.all(a,c).then(function(a){if(!e(b))throw new TypeError("You must pass a function as map's second argument.");for(var f=a.length,g=new Array(f),h=0;f>h;h++)g[h]=b(a[h]);return d.all(g,c)})}}),b("rsvp/node",["./promise","./utils","exports"],function(a,b,c){"use strict";var d=a["default"],e=b.isArray;c["default"]=function(a,b){function c(){for(var c=arguments.length,e=new Array(c),h=0;c>h;h++)e[h]=arguments[h];var i;return f||g||!b?i=this:("object"==typeof console&&console.warn('Deprecation: RSVP.denodeify() doesn\'t allow setting the "this" binding anymore. Use yourFunction.bind(yourThis) instead.'),i=b),d.all(e).then(function(c){function e(d,e){function h(){for(var a=arguments.length,c=new Array(a),h=0;a>h;h++)c[h]=arguments[h];var i=c[0],j=c[1];if(i)e(i);else if(f)d(c.slice(1));else if(g){var k,l,m={},n=c.slice(1);for(l=0;l<b.length;l++)k=b[l],m[k]=n[l];d(m)}else d(j)}c.push(h),a.apply(i,c)}return new d(e)})}var f=b===!0,g=e(b);return c.__proto__=a,c}}),b("rsvp/promise-hash",["./enumerator","./-internal","./utils","exports"],function(a,b,c,d){"use strict";function e(a,b,c){this._superConstructor(a,b,!0,c)}var f=a["default"],g=b.PENDING,h=(b.FULFILLED,c.o_create);d["default"]=e,e.prototype=h(f.prototype),e.prototype._superConstructor=f,e.prototype._init=function(){this._result={}},e.prototype._validateInput=function(a){return a&&"object"==typeof a},e.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},e.prototype._enumerate=function(){var a=this.promise,b=this._input,c=[];for(var d in b)a._state===g&&b.hasOwnProperty(d)&&c.push({position:d,entry:b[d]});var e=c.length;this._remaining=e;for(var f,h=0;a._state===g&&e>h;h++)f=c[h],this._eachEntry(f.entry,f.position)}}),b("rsvp/promise",["./config","./events","./instrument","./utils","./-internal","./promise/cast","./promise/all","./promise/race","./promise/resolve","./promise/reject","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function m(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function n(a,b){this._id=D++,this._label=b,this._subscribers=[],o.instrument&&p("created",this),s!==a&&(q(a)||l(),this instanceof n||m(),u(this,a))}var o=a.config,p=(b["default"],c["default"]),q=(d.objectOrFunction,d.isFunction),r=d.now,s=e.noop,t=(e.resolve,e.reject,e.fulfill,e.subscribe),u=e.initializePromise,v=e.invokeCallback,w=e.FULFILLED,x=f["default"],y=g["default"],z=h["default"],A=i["default"],B=j["default"],C="rsvp_"+r()+"-",D=0;k["default"]=n,n.cast=x,n.all=y,n.race=z,n.resolve=A,n.reject=B,n.prototype={constructor:n,_id:void 0,_guidKey:C,_label:void 0,_state:void 0,_result:void 0,_subscribers:void 0,_onerror:function(a){o.trigger("error",a)},then:function(a,b,c){var d=this;d._onerror=null;var e=new this.constructor(s,c),f=d._state,g=d._result;return o.instrument&&p("chained",d,e),f===w&&a?o.async(function(){v(f,e,a,g)}):t(d,e,a,b),e},"catch":function(a,b){return this.then(null,a,b)},"finally":function(a,b){var c=this.constructor;return this.then(function(b){return c.resolve(a()).then(function(){return b})},function(b){return c.resolve(a()).then(function(){throw b})},b)}}}),b("rsvp/promise/all",["../enumerator","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return new c(this,a,!0,b).promise}}),b("rsvp/promise/cast",["./resolve","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=c}),b("rsvp/promise/race",["../utils","../-internal","exports"],function(a,b,c){"use strict";var d=a.isArray,e=(a.isFunction,a.isMaybeThenable,b.noop),f=b.resolve,g=b.reject,h=b.subscribe,i=b.PENDING;c["default"]=function(a,b){function c(a){f(l,a)}function j(a){g(l,a)}var k=this,l=new k(e,b);if(!d(a))return g(l,new TypeError("You must pass an array to race.")),l;for(var m=a.length,n=0;l._state===i&&m>n;n++)h(k.resolve(a[n]),void 0,c,j);return l}}),b("rsvp/promise/reject",["../-internal","exports"],function(a,b){"use strict";var c=a.noop,d=a.reject;b["default"]=function(a,b){var e=this,f=new e(c,b);return d(f,a),f}}),b("rsvp/promise/resolve",["../-internal","exports"],function(a,b){"use strict";var c=a.noop,d=a.resolve;b["default"]=function(a,b){var e=this;if(a&&"object"==typeof a&&a.constructor===e)return a;var f=new e(c,b);return d(f,a),f}}),b("rsvp/race",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.race(a,b)}}),b("rsvp/reject",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.reject(a,b)}}),b("rsvp/resolve",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.resolve(a,b)}}),b("rsvp/rethrow",["exports"],function(a){"use strict";a["default"]=function(a){throw setTimeout(function(){throw a}),a}}),b("rsvp/utils",["exports"],function(a){"use strict";function b(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return"object"==typeof a&&null!==a}a.objectOrFunction=b,a.isFunction=c,a.isMaybeThenable=d;var e;e=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var f=e;a.isArray=f;var g=Date.now||function(){return(new Date).getTime()};a.now=g;var h=Object.create||function(a){var b=function(){};return b.prototype=a,b};a.o_create=h}),b("rsvp",["./rsvp/promise","./rsvp/events","./rsvp/node","./rsvp/all","./rsvp/all-settled","./rsvp/race","./rsvp/hash","./rsvp/hash-settled","./rsvp/rethrow","./rsvp/defer","./rsvp/config","./rsvp/map","./rsvp/resolve","./rsvp/reject","./rsvp/filter","./rsvp/asap","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";function r(a,b){E.async(a,b)}function s(){E.on.apply(E,arguments)}function t(){E.off.apply(E,arguments)}var u=a["default"],v=b["default"],w=c["default"],x=d["default"],y=e["default"],z=f["default"],A=g["default"],B=h["default"],C=i["default"],D=j["default"],E=k.config,F=k.configure,G=l["default"],H=m["default"],I=n["default"],J=o["default"],K=p["default"];if(E.async=K,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var L=window.__PROMISE_INSTRUMENTATION__;F("instrument",!0);for(var M in L)L.hasOwnProperty(M)&&s(M,L[M])}q.Promise=u,q.EventTarget=v,q.all=x,q.allSettled=y,q.race=z,q.hash=A,q.hashSettled=B,q.rethrow=C,q.defer=D,q.denodeify=w,q.configure=F,q.on=s,q.off=t,q.resolve=H,q.reject=I,q.async=r,q.map=G,q.filter=J}),b("spiceworks-sdk/card",["conductor","conductor/card","exports"],function(a,b,c){"use strict";var d=a["default"],e=d.card;c.card=e}),b("spiceworks-sdk",["spiceworks-sdk/card","exports"],function(a,b){"use strict";var c=a.card;b.card=c}),a.SW=c("spiceworks-sdk")}(self);